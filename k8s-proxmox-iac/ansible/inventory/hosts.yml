---
# ansible/inventory/hosts.yml
# Inventaire dynamique des nodes Kubernetes

all:
  vars:
    ansible_user: ubuntu
    ansible_ssh_private_key_file: ~/.ssh/id_rsa_proxmox_templates
    ansible_python_interpreter: /usr/bin/python3
    # IP du r√©seau interne (vmbr1)
    k8s_network_interface: eth1

  children:
    masters:
      hosts:
        k8s-master:
          ansible_host: 10.0.0.10  # IP sur vmbr1 pour la communication K8s
          internal_ip: 10.0.0.10
          node_role: control-plane

    workers:
      hosts:
        k8s-worker1:
          ansible_host: 10.0.0.11
          internal_ip: 10.0.0.11
          node_role: worker

        k8s-worker2:
          ansible_host: 10.0.0.12
          internal_ip: 10.0.0.12
          node_role: worker

        k8s-worker3:
          ansible_host: 10.0.0.13
          internal_ip: 10.0.0.13
          node_role: worker

    k8s_cluster:
      children:
        masters:
        workers:
      vars:
        # Configuration commune au cluster
        k8s_version: "1.28"
        pod_network_cidr: "10.244.0.0/16"
        service_cidr: "10.96.0.0/12"
