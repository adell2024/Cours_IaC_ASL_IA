# ðŸ§ª Exercice 04 â€” ConfigMaps & Secrets

## ðŸŽ¯ Objectif
Apprendre Ã  **gÃ©rer la configuration et les secrets** dans Kubernetes afin que les applications restent **dÃ©couplÃ©es de leur configuration** et que les informations sensibles soient protÃ©gÃ©es.

## ðŸ“Œ Contexte
- Les pods doivent souvent utiliser des **fichiers de configuration**, **variables dâ€™environnement**, ou **mots de passe**  
- Kubernetes propose deux objets principaux pour cela :
  1. **ConfigMap** â†’ stocke des informations de configuration non sensibles
  2. **Secret** â†’ stocke des informations sensibles (mots de passe, clÃ©s API, certificats)  

## ðŸ§© Ã‰tapes

### Ã‰tape 1 â€” CrÃ©er un ConfigMap

Exemple : configuration dâ€™un message de bienvenue pour NGINX

kubectl create configmap nginx-config --from-literal=welcome_message="Bienvenue sur mon cluster Kubernetes !"

VÃ©rifier :

kubectl get configmap nginx-config -o yaml

### Ã‰tape 2 â€” Injecter le ConfigMap dans un pod

CrÃ©er un pod test utilisant le ConfigMap comme variable dâ€™environnement. crÃ©er le fichier pod-configmap.yaml :
apiVersion: v1
kind: Pod
metadata:
  name: nginx-config-test
spec:
  containers:
  - name: nginx
    image: nginx
    env:
    - name: WELCOME_MESSAGE
      valueFrom:
        configMapKeyRef:
          name: nginx-config
          key: welcome_message

DÃ©ployer :

kubectl apply -f pod-configmap.yaml

VÃ©rifier le pod et sa variable dâ€™environnement :

kubectl exec -it nginx-config-test -- printenv WELCOME_MESSAGE

### Ã‰tape 3 â€” CrÃ©er un Secret

Exemple : stocker un mot de passe pour la base de donnÃ©es :

kubectl create secret generic db-secret --from-literal=password='MonSuperMotDePasse'

VÃ©rifier :

kubectl get secret db-secret -o yaml

Les valeurs sont encodÃ©es en Base64, elles ne sont pas visibles en clair.

# Ã‰tape 4 â€” Injecter le Secret dans un pod

crÃ©er le fichier pod-secret.yaml :

apiVersion: v1
kind: Pod
metadata:
  name: nginx-secret-test
spec:
  containers:
  - name: nginx
    image: nginx
    env:
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-secret
          key: password

DÃ©ployer et vÃ©rifier :

kubectl exec -it nginx-secret-test -- printenv DB_PASSWORD

âœ… RÃ©sultat attendu

Les ConfigMaps permettent de passer des informations de configuration aux pods

Les Secrets permettent de passer des informations sensibles en toute sÃ©curitÃ©

Les pods rÃ©cupÃ¨rent correctement ces valeurs via variables dâ€™environnement ou volumes montÃ©s

